(this["webpackJsonppawty-trainer"]=this["webpackJsonppawty-trainer"]||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var c,a,r,s,i,d=n(1),j=n(39),o=n.n(j),l=(n(78),n(28)),b=n(12),u=n(118),h=n(13),O=(n(79),n(80),n(15)),m=n(2),x=function(){return Object(m.jsxs)("header",{children:[Object(m.jsx)("section",{className:"header-container",children:Object(m.jsx)("h1",{className:"title",children:"Pawty Trainer"})}),Object(m.jsxs)("nav",{children:[Object(m.jsx)(O.b,{to:"/",className:"dashboard-nav",children:"Dashboard"}),Object(m.jsx)(O.b,{to:"/create",className:"add-dog-nav",children:"Add Dog"}),Object(m.jsx)(O.b,{to:"/add_event",className:"add-event-nav",children:"Add Event"}),Object(m.jsx)(O.b,{to:"/calendar",className:"calendar-nav",children:"Calendar"})]})]})},g=n(9),v=n.n(g),p=(n(89),n(90),n(119)),f=n(36),N=n(117),D=Object(N.a)(c||(c=Object(f.a)(["\n  mutation ($name: String!, $userId: Int!, $breed: String!, $age: Int!) {\n    createDog(input: {\n        name: $name,\n        userId: $userId,\n        breed: $breed,\n        age: $age\n  }) {\n      dog {\n        id\n        userId\n        name\n        breed\n        age\n      }\n      errors\n    }\n  }\n"]))),y=Object(N.a)(a||(a=Object(f.a)(["\n  mutation ($id: ID!) {\n    destroyDog(input: {\n      id: $id\n    }) {\n      id\n    }\n  }\n"]))),S=Object(N.a)(r||(r=Object(f.a)(["\n  mutation ($name: String!, $dogId: Int!, $eventDatetime: ISO8601DateTime!){\n    createEvent(input: {\n      name: $name,\n      dogId: $dogId,\n      completed: false,\n      eventDatetime: $eventDatetime,  \n  }) {\n      event {\n        id\n        dogId\n        name\n        completed\n        eventDatetime\n      }\n      errors\n    }\n  }\n"]))),E=Object(N.a)(s||(s=Object(f.a)(["\n  mutation ($eventId: ID!){\n    updateEvent(\n      input: { \n        id: $eventId, \n        completed: true \n      }) {\n        event {\n          id\n          name\n          completed\n          dogId\n            dog {\n              id\n              name\n              breed\n              age\n                user {\n                  name\n                }\n        }\n      }\n    }\n  }\n"]))),I=Object(N.a)(i||(i=Object(f.a)(["\n  query {\n    user(id: 1) {\n      id\n      name\n    } dogs {\n      id\n      name\n      breed\n      age\n    } events {\n      id\n      name\n      completed\n      eventDatetime\n      dogId\n        dog {\n          name\n          breed\n          age\n          userId\n          user {\n            name\n        }\n      }\n    }\n  }\n"]))),C=function(e){var t=e.event,n=Object(p.a)(E,{refetchQueries:[I]}),c=Object(b.a)(n,1)[0];return Object(m.jsx)("section",{className:"event-card",children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:"dog-name",children:t.dog.name}),Object(m.jsx)("li",{className:"event-name",children:Object(m.jsx)(O.b,{to:"/event/".concat(t.id),children:Object(m.jsx)("em",{children:t.name})},t.id)}),Object(m.jsxs)("li",{className:"card-title event-date",children:["To be completed by: ",new Date(t.eventDatetime).toLocaleString()]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("input",{type:"checkbox",id:t.id,value:"true",onClick:function(){c({variables:{eventId:t.id}})}}),Object(m.jsx)("label",{for:t.id,className:"complete-title",children:"Complete Event"})]})]})},t.id)};Error.propTypes={event:v.a.object.isRequired};var $=function(e){var t=e.userName,n=e.dogs,c=e.events,a=e.completedEvents,r=[];n.length&&(r=n.map((function(e){return Object(m.jsxs)("li",{className:"dog-name-list-container",children:[Object(m.jsx)("p",{className:"material-icons",children:"pets"}),Object(m.jsx)(O.b,{to:"/dog/".concat(e.id),children:e.name})]},e.id)})));var s=[];if(c.length){var i=Object(l.a)(c);i.splice(2),s=i.map((function(e){return Object(m.jsx)(C,{event:e},e.id)}))}var d=[];if(a){d=["\u2605"];for(var j=1;j<a;j++)j%3||(d=[].concat(Object(l.a)(d),["\u2605"]))}return n.length&&c.length?Object(m.jsxs)("section",{className:"dashboard",children:[Object(m.jsxs)("h2",{children:["Welcome ",t,"!"]}),Object(m.jsx)("p",{className:"rewards",children:d}),Object(m.jsxs)("section",{className:"sections",children:[Object(m.jsxs)("section",{className:"my-dogs",children:[Object(m.jsx)("h3",{className:"section-titles",children:"My Dogs"}),Object(m.jsx)("ul",{className:"dog-list",children:r})]}),Object(m.jsxs)("section",{className:"Upcoming",children:[Object(m.jsx)("h3",{className:"section-titles",children:"Upcoming Events"}),s]})]})]}):n.length&&!c.length?Object(m.jsxs)("section",{className:"dashboard",children:[Object(m.jsxs)("h2",{children:["Welcome ",t,"!"]}),Object(m.jsx)("p",{children:d}),Object(m.jsxs)("section",{children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("h3",{children:"My Dogs"}),Object(m.jsx)("ul",{className:"dog-list-names",children:r})]}),Object(m.jsx)("section",{children:Object(m.jsx)("h3",{children:"No Upcoming Events"})})]})]}):!n.length&&c.length?Object(m.jsxs)("section",{className:"dashboard",children:[Object(m.jsxs)("h2",{children:["Welcome ",t,"!"]}),Object(m.jsx)("p",{children:d}),Object(m.jsxs)("section",{children:[Object(m.jsx)("section",{children:Object(m.jsx)("h3",{children:"Add a dog!"})}),Object(m.jsxs)("section",{children:[Object(m.jsx)("h3",{children:"Upcoming Events"}),s]})]})]}):Object(m.jsxs)("section",{className:"dashboard",children:[Object(m.jsxs)("h2",{children:["Welcome ",t,"!"]}),Object(m.jsx)("p",{children:d}),Object(m.jsxs)("section",{children:[Object(m.jsx)("section",{children:Object(m.jsx)("h3",{children:"Add a dog!"})}),Object(m.jsx)("section",{children:Object(m.jsx)("h3",{children:"No Upcoming Events"})})]})]})};Error.propTypes={userName:v.a.string.isRequired,dogs:v.a.arrayOf(v.a.object).isRequired,events:v.a.arrayOf(v.a.object).isRequired,completedEvents:v.a.arrayOf(v.a.object).isRequired};n(92);var q=function(e){var t=e.error;return Object(m.jsx)("article",{className:"error-container",children:Object(m.jsxs)("div",{className:"error-div",children:[Object(m.jsx)("h2",{className:"error-h2",children:t}),Object(m.jsx)(O.b,{to:"/",children:Object(m.jsx)("button",{className:"details-back",children:"Home"})})]})})},w=(n(93),function(e){var t=e.dogs,n=Object(d.useState)(""),c=Object(b.a)(n,2),a=c[0],r=c[1],s=Object(d.useState)(""),i=Object(b.a)(s,2),j=i[0],o=i[1],l=Object(d.useState)(0),u=Object(b.a)(l,2),h=u[0],O=u[1],x=Object(d.useState)(""),g=Object(b.a)(x,2),v=g[0],f=g[1],N=Object(p.a)(S,{refetchQueries:[I]}),D=Object(b.a)(N,2),y=D[0],E=D[1],C=E.loading,$=E.error,q=function(){r(""),o(""),O(0)};return C?"Submitting...":$?"Submission error! ".concat($.message):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{children:[Object(m.jsx)("h2",{className:"text event-title",children:"Add New Event!"}),Object(m.jsx)("input",{type:"text",placeholder:"Event Name",value:a,className:"event-name-input",onChange:function(e){return r(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"text select-dog-label",children:"Select dog:"}),Object(m.jsxs)("select",{className:"select-dog-input",onChange:function(e){return O(e.target.value)},children:[Object(m.jsx)("option",{placeholder:"Dog Name",value:h,children:"Dog Name"},h),t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(m.jsx)("label",{className:"text",children:"Set event date:"}),Object(m.jsx)("input",{type:"date",placeholder:"EventDateTime",value:j,className:"set-date-input",onChange:function(e){return o(e.target.value)},required:!0}),Object(m.jsx)("button",{className:"event-submit-btn",onClick:function(e){return function(e){e.preventDefault(),a&&j&&h?(y({variables:{dogId:Number(h),name:a,eventDatetime:j}}),f(""),q()):f("Sorry, you must input all fields before creating an event!")}(e)},children:"Submit"}),Object(m.jsx)("p",{className:"event-error-msg",children:v})]})})});Error.propTypes={dogs:v.a.arrayOf(v.a.object).isRequired};n(94);var T=function(e){var t=e.events,n=[];return t.length&&(n=t.map((function(e){return Object(m.jsx)(C,{event:e},e.id)}))),t.length?Object(m.jsxs)("section",{className:"calendar",children:[Object(m.jsx)("h2",{children:"Calendar"}),Object(m.jsx)("section",{children:n})]}):Object(m.jsxs)("section",{className:"calendar",children:[Object(m.jsx)("h2",{children:"Calendar"}),Object(m.jsx)("p",{children:"You have no events scheduled."})]})};Error.propTypes={events:v.a.arrayOf(v.a.object).isRequired};n(95);var R=function(e){var t=e.matchingEvent;return Object(m.jsxs)("section",{className:"event",children:[Object(m.jsxs)("dl",{children:[Object(m.jsx)("dt",{children:"Dog"}),Object(m.jsx)("dd",{children:t.dog.name}),Object(m.jsx)("dt",{children:"Event Name"}),Object(m.jsx)("dd",{children:t.name}),Object(m.jsx)("dt",{children:"Event Date"}),Object(m.jsx)("dd",{children:new Date(t.eventDatetime).toLocaleString()})]}),Object(m.jsx)(O.b,{to:"/",children:Object(m.jsx)("button",{children:"Home"})})]})};Error.propTypes={matchingEvent:v.a.object.isRequired};n(96);var k=function(e){var t=e.matchingDog,n=e.removeDog,c=Object(h.g)(),a=Object(p.a)(y),r=Object(b.a)(a,2),s=r[0],i=r[1],d=i.loading,j=i.error;return d?"Submitting...":j?"Submission error! ".concat(j.message):Object(m.jsxs)("section",{className:"dog-details",children:[Object(m.jsxs)("dl",{children:[Object(m.jsx)("dt",{children:"Dog Name"}),Object(m.jsx)("dd",{children:t.name}),Object(m.jsx)("dt",{children:"Dog Age"}),Object(m.jsx)("dd",{children:t.age}),Object(m.jsx)("dt",{children:"Dog Breed"}),Object(m.jsx)("dd",{children:t.breed})]}),Object(m.jsx)("button",{onClick:function(e){return function(e){e.preventDefault(),s({variables:{id:Number(t.id)}}),n(t),c.push("/")}(e)},children:"Delete This Dog"})]})};Error.propTypes={matchingDog:v.a.object.isRequired,removeDog:v.a.func.isRequired};n(97);var A=n(68),U=function(e){var t=e.userID,n=Object(d.useState)(""),c=Object(b.a)(n,2),a=c[0],r=c[1],s=Object(d.useState)(""),i=Object(b.a)(s,2),j=i[0],o=i[1],l=Object(d.useState)(""),u=Object(b.a)(l,2),h=u[0],O=u[1],x=Object(d.useState)(""),g=Object(b.a)(x,2),v=g[0],f=g[1],N=Object(d.useState)([]),y=Object(b.a)(N,2),S=y[0],E=y[1],C=Object(p.a)(D,{refetchQueries:[I]}),$=Object(b.a)(C,2),q=$[0],w=$[1],T=w.loading,R=w.error;Object(d.useEffect)((function(){fetch("https://api.thedogapi.com/v1/breeds",{headers:{"X-Api-Key":"519cd25b-a229-4cd2-a69c-ebcd7d8dea4f"}}).then((function(e){return e.json()})).then((function(e){return E(e)}))}),[]);var k=function(){r(""),o(""),O("")};if(T)return"Submitting...";if(R)return"Submission error! ".concat(R.message);var U=S.map((function(e){return{label:e.name,value:e.name}}));return U.push({label:"Mixed",value:"Mixed"}),Object(m.jsxs)("form",{className:"add-dog",children:[Object(m.jsx)("h2",{className:"train-dog-title text",children:"Train Your Dog!"}),Object(m.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:a,className:"name-input",onChange:function(e){return r(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"number",placeholder:"Age",name:"age",min:"0",value:j,className:"age-input",onChange:function(e){return o(e.target.value)},required:!0}),Object(m.jsx)("label",{className:"select-label text",children:"Select Breed:"}),Object(m.jsx)(A.a,{className:"select",options:U,onChange:function(e){return O(e.value)}}),Object(m.jsx)("button",{className:"create-btn",onClick:function(e){return function(e){e.preventDefault(),a&&j&&h?(q({variables:{name:a,userId:t,breed:h,age:Number(j)}}),f(""),k()):f("Sorry, you must input all fields before creating a dog!")}(e)},children:"Create"}),Object(m.jsx)("p",{className:"create-dog-error",children:v})]})};Error.propTypes={userID:v.a.number.isRequired};var F=function(){var e=Object(u.a)(I),t=e.loading,n=e.error,c=e.data,a=Object(d.useState)({}),r=Object(b.a)(a,2),s=r[0],i=r[1],j=Object(d.useState)([]),o=Object(b.a)(j,2),O=o[0],g=o[1],v=Object(d.useState)([]),p=Object(b.a)(v,2),f=p[0],N=p[1],D=Object(d.useState)(0),y=Object(b.a)(D,2),S=y[0],E=y[1];Object(d.useEffect)((function(){if(!t&&c){i(c.user),g(c.dogs);var e=A(c.events),n=F(e);N(n.outstanding),E(n.completed.length)}}),[c,t]);var C=function(e){var t=Object(l.a)(O),n=t.indexOf(e);t.splice(n,1),g(Object(l.a)(t))};if(t)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{}),Object(m.jsx)("p",{children:"Loading..."})]});if(n)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{}),Object(m.jsx)(q,{errorCode:n})]});var A=function(e){return Object(l.a)(e).sort((function(e,t){return new Date(e.eventDatetime)-new Date(t.eventDatetime)}))},F=function(e){var t=new Date;return Object(l.a)(e).reduce((function(e,n){return n.completed&&(e.completed=[].concat(Object(l.a)(e.completed),[n])),!n.completed&&new Date(n.eventDatetime)>=t&&(e.outstanding=[].concat(Object(l.a)(e.outstanding),[n])),e}),{completed:[],outstanding:[]})};return c?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{}),Object(m.jsx)("main",{children:Object(m.jsxs)(h.d,{children:[Object(m.jsx)(h.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)($,{userName:s.name,dogs:O,events:f,completedEvents:S})}}),Object(m.jsx)(h.b,{path:"/create",children:Object(m.jsx)(U,{userID:1})}),Object(m.jsx)(h.b,{path:"/add_event",children:Object(m.jsx)(w,{dogs:O})}),Object(m.jsx)(h.b,{path:"/calendar",children:Object(m.jsx)(T,{events:f})}),Object(m.jsx)(h.b,{path:"/dog/:id",render:function(e){var t=e.match,n=O.find((function(e){return e.id===t.params.id}));return n?Object(m.jsx)(k,{matchingDog:n,removeDog:C}):Object(m.jsx)("div",{children:"Couldn't find this dog."})}}),Object(m.jsx)(h.b,{path:"/event/:id",render:function(e){var t=e.match,n=f.find((function(e){return e.id===t.params.id}));return n?Object(m.jsx)(R,{matchingEvent:n}):Object(m.jsx)("div",{children:"Couldn't find this event."})}}),Object(m.jsx)(h.b,{exact:!0,path:"/404",render:function(){return Object(m.jsx)(q,{errorCode:404})}}),Object(m.jsx)(h.a,{to:"/404"})]})})]}):void 0},M=n(115),W=n(116),B=n(114),L=new M.a({uri:"https://pawty-trainer-api.herokuapp.com/graphql",cache:new W.a});o.a.render(Object(m.jsx)(O.a,{children:Object(m.jsx)(B.a,{client:L,children:Object(m.jsx)(F,{})})}),document.getElementById("root"))},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.824ec1d1.chunk.js.map